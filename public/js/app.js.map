{"version":3,"sources":["app.js"],"names":[],"mappings":"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","file":"app.js","sourcesContent":["// When ready...\r\n$(document).ready(function () {\r\n\r\n  // Open menu when user clicks\r\n  $(\"#user\").click(function () {\r\n    $(\"#menu\").toggle().menu();\r\n  });\r\n\r\n  // If we're on the stock page,\r\n  var matches = window.location.href.match(/\\/stocks\\/(.*)$/);\r\n  if (matches) {\r\n    // Get the stock information.\r\n    getStock(matches[1]);\r\n  }\r\n\r\n  // If we're on the home page\r\n  if (window.location.href.match(/http:\\/\\/stocks.app\\/?(\\?=.*)?/)) {\r\n    console.log(window.location.href.match(/http:\\/\\/stocks.app\\?/));\r\n    // Get all the news for the news section.\r\n    getAllNews();\r\n    // Get the data for the ticker strip.\r\n    tickerStrip();\r\n  }\r\n\r\n  // Stop the user submitting the search form so we can use this script instead.\r\n  $(\"#searchForm\").on('submit', function (e) {\r\n    e.preventDefault();\r\n  });\r\n\r\n  // Set focus to the search bar on each page\r\n  $('#search').focus();\r\n\r\n  /* Get suggestions on search\r\n   This is now done through the system server as Yahoo started rejecting\r\n   jsonp requests. */\r\n  $(\"#search\").autocomplete({\r\n    source: function (request, response) {\r\n      // Send an ajax post request to the server.\r\n      $.ajax({\r\n        method: \"POST\",\r\n        // Validate the request with the token in the template view.\r\n        headers: {\r\n          'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        },\r\n        // Send the request to the stock search route.\r\n        url: \"http://stocks.app/stocks/search/\" + request.term,\r\n        success: function (data) {\r\n          // Foreach symbol suggestion\r\n          response($.map(data.ResultSet.Result, function (item) {\r\n            if (item.symbol.length < 10) // Remove invalid data\r\n            {\r\n              // Insert the symbol into the view\r\n              return {\r\n                label: item.name + \" [\" + item.symbol + \"]\",\r\n                value: item.symbol\r\n              }\r\n            }\r\n          }));\r\n\r\n          // Align symbol suggestions properly.\r\n          if ($(\".ui-autocomplete-container\").length === 0) {\r\n            $(\".ui-autocomplete\").wrap(\"<div class='ui-autocomplete-container'></div>\");\r\n            $(\".ui-autocomplete\").wrap(\"<div class='container'></div>\");\r\n          }\r\n          $(\".ui-autocomplete-container\").insertAfter(\".navbar\");\r\n          $(\".navbar-top\")\r\n            .css(\"border\", \"1px solid #DDD\")\r\n            .css(\"box-shadow\", \"none\");\r\n\r\n          // Change stock page to first symbol suggestion.\r\n          changeStock(data.ResultSet.Result[0].symbol);\r\n\r\n          // If a suggestion is pressed, change the stock page to that.\r\n          $(\".ui-menu-item\").click(function () {\r\n            changeStock($(this).text().match(/\\[(.*?)]/));\r\n          });\r\n        }\r\n      });\r\n    }\r\n  });\r\n\r\n  /**\r\n   * Show loading icon\r\n   */\r\n  function loading() {\r\n    // Show loading\r\n    $(\"#loading\").css(\"display\", \"inline-block\");\r\n    $(\"#content\").hide();\r\n  }\r\n\r\n  /**\r\n   * Hide loading icon\r\n   */\r\n  function stopLoading() {\r\n    // Hide loading\r\n    $('#loading').hide();\r\n\r\n    // Show content\r\n    $('#content').show();\r\n    $('#stock').show();\r\n  }\r\n\r\n  /**\r\n   * Get stock when stock page accessed directly\r\n   * (We already have the stock view)\r\n   *\r\n   * @param symbol\r\n   */\r\n  function getStock(symbol) {\r\n\r\n    // Show loading screen\r\n    loading();\r\n\r\n    // Get the stock\r\n    requestStock(symbol, function (data) {\r\n      if (data.query && data.query.results) {\r\n\r\n        // Insert stock information into the stock page.\r\n        insertStockInfo(data.query.results.quote);\r\n\r\n        // Hide the loading page.\r\n        stopLoading();\r\n      } else { // Throw 404 if not found\r\n        window.location.href = '/404';\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * Change stock when searching\r\n   *\r\n   * @param symbol\r\n   */\r\n  function changeStock(symbol) {\r\n    // Show loading\r\n    loading();\r\n\r\n    // Get the stock\r\n    requestStock(symbol, function (data) {\r\n\r\n      // Get the view from the server\r\n      var quote = data.query.results.quote;\r\n      $.ajax({\r\n        headers: {\r\n          'X-CSRF-TOKEN': $('meta[name=\"csrf-token\"]').attr('content')\r\n        },\r\n        url: \"http://stocks.app/stocks/\" + quote.Symbol,\r\n        data: {\r\n          ajax: 1\r\n        },\r\n        success: function (data) {\r\n\r\n          // Change the view we are on to the stock view.\r\n          $('#content').html(data);\r\n\r\n          // Insert the stock information into this view\r\n          insertStockInfo(quote);\r\n\r\n          // Hide the loading screen.\r\n          stopLoading();\r\n        }\r\n      });\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get stock data\r\n   *\r\n   * @param symbol\r\n   * @param success\r\n   */\r\n  function requestStock(symbol, success) {\r\n\r\n    // Request data\r\n    $.ajax({\r\n      url: \"http://query.yahooapis.com/v1/public/yql\",\r\n      data: {\r\n        q: \"select * from yahoo.finance.quotes where symbol = '\" + symbol + \"'\",\r\n        format: \"json\",\r\n        env: \"store://datatables.org/alltableswithkeys\"\r\n      },\r\n      success: function (data) {\r\n        if (data.query.results.quote.Name) {\r\n          success(data);\r\n\r\n          // Change URL\r\n          history.pushState(window.event.state,\r\n            data.query.results.quote.Name,\r\n            \"http://stocks.app/stocks/\" + symbol\r\n          );\r\n        } else {\r\n          // Throw 404 if not found\r\n          window.location.href = '/404';\r\n        }\r\n      },\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get news for homepage\r\n   */\r\n  function getAllNews() {\r\n\r\n    // Send request to yahoo's servers\r\n    $.ajax({\r\n      url: \"https://query.yahooapis.com/v1/public/yql\",\r\n      data: {\r\n        q: \"select * from rss(0,6) where url='https://uk.finance.yahoo.\"\r\n        + \"com/news/topic-top-stories/?format=rss'\",\r\n        format: \"json\"\r\n      },\r\n      dataType: \"jsonp\",\r\n      jsonp: \"callback\",\r\n      cache: true,\r\n      success: function (data) {\r\n        // Insert news into the news table.\r\n        insertNews(data);\r\n      },\r\n      error: function () {\r\n        $(\"#news\").append(\"Failed to retrieve headlines.\");\r\n      },\r\n      timeout: 2000\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get news for stock\r\n   *\r\n   * @param symbol\r\n   */\r\n  function getNews(symbol) {\r\n    // Send request\r\n    $.ajax({\r\n      type: \"GET\",\r\n      url: \"https://query.yahooapis.com/v1/public/yql\",\r\n      data: {\r\n        q: \"select * from rss(0,6) where url='http://feeds.finance.ya\" +\r\n        \"hoo.com/rss/2.0/headline?region=US&lang=en-US&s=\" + symbol + \"'\",\r\n        format: \"json\"\r\n      },\r\n      dataType: \"jsonp\",\r\n      jsonp: \"callback\",\r\n      cache: true,\r\n      success: function (data) {\r\n        // Insert news into the news table.\r\n        insertNews(data);\r\n      },\r\n      error: function () {\r\n        $(\"#news\").append(\"Failed to retrieve headlines.\");\r\n      },\r\n      timeout: 2000\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Generate ticker strip on home page\r\n   */\r\n  function tickerStrip() {\r\n    // Request data\r\n    $.ajax({\r\n      url: \"http://query.yahooapis.com/v1/public/yql\",\r\n      data: {\r\n        q: \"select * \" +\r\n        \"from yahoo.finance.quotes \" +\r\n        \"where symbol in ('^FTSE', '^FTMC', '^N225', '^NDX', '^GSPC', '^FCHI')\",\r\n        format: \"json\",\r\n        env: \"store://datatables.org/alltableswithkeys\"\r\n      },\r\n      success: function (data) {\r\n        // Insert into marquee\r\n        data.query.results.quote.forEach(function (quote) {\r\n          if (quote.Change == null) {\r\n            return;\r\n          }\r\n\r\n          // Setup colours\r\n          var green = $(\"<span style='color:green'></span>\");\r\n          var bGreen = $(\"<span style='color:green;font-weight: bold'></span>\");\r\n          var red = $(\"<span style='color:red'></span>\");\r\n          var bRed = $(\"<span style='color:red;font-weight: bold'></span>\");\r\n\r\n          var marquee = $(\".marquee\");\r\n\r\n          // Add link\r\n          var url = \"stocks/\" + quote.Symbol;\r\n          marquee.append('<a href=\"' + url + '\">' + quote.Name + '</a> ');\r\n\r\n          // Add change\r\n          if (quote.Change.indexOf(\"+\") !== -1) {\r\n            marquee.append(green.html(\"<i class='fa fa-caret-up'></i> \"));\r\n            marquee.append(quote.Ask || quote.LastTradePriceOnly);\r\n            // Remove + or - from percentage\r\n            var changeP = quote.ChangeinPercent.substring(1);\r\n            marquee.append(bGreen.html(\" (\" + changeP + \")\"));\r\n          } else {\r\n            marquee.append(red.html(\"<i class='fa fa-caret-down'></i> \"));\r\n            marquee.append(quote.Ask || quote.LastTradePriceOnly);\r\n            // Remove + or - from percentage\r\n            var changeP = quote.ChangeinPercent.substring(1);\r\n            marquee.append(bRed.html(\" (\" + changeP + \")\"));\r\n          }\r\n          $(\".marquee\").append(\"&nbsp&nbsp&nbsp&nbsp&nbsp</span>\");\r\n        });\r\n        $(\".marquee\").marquee({\r\n          gap: 10,\r\n          duration: 10000,\r\n          // Make the data go round and round with no gaps.\r\n          duplicated: true,\r\n          // Pause ticker strip when the mouse is moved over it.\r\n          pauseOnHover: true\r\n        });\r\n      },\r\n      error: function () {\r\n        $(\".marquee\").hide();\r\n      },\r\n      timeout: 5000\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Add stock into\r\n   *\r\n   * @param quote\r\n   */\r\n  function insertStockInfo(quote) {\r\n    document.title = quote.symbol;\r\n    $(\".symbol\").prepend(quote.symbol);\r\n    $(\".name\").prepend(quote.Name);\r\n    var price = quote.Ask || quote.LastTradePriceOnly;\r\n    $(\".price\").prepend(price);\r\n    $(\".change\").prepend(quote.Change);\r\n    // Remove + or - from percentage\r\n    var changeP = quote.ChangeinPercent.substring(1);\r\n    $(\".changeP\").prepend(\"(\" + changeP + \")\");\r\n\r\n    // Change buy amount\r\n    $(\"#priceBuy\").text(price);\r\n    $(\"#amountBuy\").change(function () {\r\n      var newPrice = price * $(\"#amountBuy\").val();\r\n      $(\"#priceBuy\").text(newPrice.toPrecision(5));\r\n    });\r\n\r\n    if ($(\".change\").text().indexOf(\"+\") !== -1) {\r\n      $(\".change\").attr('style', 'color: green');\r\n      $(\".changeP\").attr('style', 'color: green');\r\n    } else {\r\n      $(\".change\").attr('style', 'color: red');\r\n      $(\".changeP\").attr('style', 'color: red');\r\n    }\r\n\r\n    $(\"#symbolImage\").attr(\r\n      \"src\",\r\n      \"http://chart.finance.yahoo.com/z?&t=6m&q=l&l=on&z=l&p=m50,e200,v&s=\"\r\n      + quote.symbol\r\n    )\r\n    if ($(\".breadcrumb li\").length > 1) {\r\n      $(\".breadcrumb li:last\").remove();\r\n    }\r\n    $(\".compare\").each(function () {\r\n      // Get text\r\n      var text = $(this).text();\r\n\r\n      // Calculate percentage\r\n      var percentage = ((text - price) / price) * 100;\r\n\r\n      // Get amount\r\n      var amount = $(this)\r\n        .closest(\"tr\")\r\n        .find(\".form-control\")\r\n        .first()\r\n        .attr(\"value\");\r\n\r\n      // Calculate profit\r\n      var profit = amount * (text - price);\r\n\r\n      // Setup colours\r\n      var green = $(\"<span style='color:green'></span>\");\r\n      var red = $(\"<span style='color:red'></span>\");\r\n\r\n      // Setup strings\r\n      var percentageString = \"(\" + parseInt(percentage).toString() + \"%)\";\r\n      var profitString = \"<br>$\" + parseInt(profit).toString();\r\n\r\n      // Insert data\r\n      if (percentage >= 0) {\r\n        $(this).html(green.html(\"<i class='fa fa-caret-up'></i>\"));\r\n        $(this).append(text);\r\n        $(this).append(green.html(percentageString));\r\n        $(this).append(green.html(profitString));\r\n      } else {\r\n        $(this).html(red.html(\"<i class='fa fa-caret-down'></i>\"));\r\n        $(this).append(text);\r\n        $(this).append(red.html(percentageString));\r\n        $(this).append(red.html(profitString));\r\n      }\r\n    });\r\n    // Add symbol to the breadcrumb\r\n    $(\".breadcrumb\").append(\"<li>\" + quote.symbol + \"</li>\");\r\n\r\n    // Insert news\r\n    getNews(quote.symbol);\r\n  }\r\n\r\n  /**\r\n   * Insert the news into the news table.\r\n   *\r\n   * @param data\r\n   */\r\n  function insertNews(data) {\r\n    if (data.query && data.query.results.item[0]) {\r\n      // Loop through news items\r\n      data.query.results.item.forEach(function (entry, i) {\r\n        // Get link and date of first items.\r\n        var link = $(\"#news a:eq(\" + i + \")\");\r\n        var date = $(\"#news .date:eq(\" + i + \")\");\r\n\r\n        // Insert link and date\r\n        link.attr('href', entry.link);\r\n        link.html(entry.title);\r\n        date.html(entry.pubDate);\r\n\r\n        // Add description\r\n        if (entry.description) {\r\n          // Remove html\r\n          link.attr('title', strip(entry.description));\r\n        } else {\r\n          link.attr('title', \"No description.\");\r\n        }\r\n      });\r\n    } else { // No news\r\n      $(\"#news\").append(\"No news has been found.\")\r\n    }\r\n  }\r\n\r\n  // Remove HTML\r\n  function strip(html) {\r\n    var tmp = document.createElement(\"DIV\");\r\n    tmp.innerHTML = html;\r\n    return tmp.textContent || tmp.innerText || \"\";\r\n  }\r\n});\r\n"],"sourceRoot":"/source/"}